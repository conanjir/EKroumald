<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Circular Rings — Scroll Zoom</title>
  <style>
    @font-face {
      font-family: "EK Roumald";
      src: url("fonts/EKRoumald-Roman.ttf") format("truetype");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: "EK Roumald";
      src: url("fonts/EKRoumald-Italic.ttf") format("truetype");
      font-weight: 400;
      font-style: italic;
      font-display: swap;
    }

    :root{
      --bg: #f7f4e6;
      --ink: #131313;
      --size: min(90vmin, 780px);
      --outer-frac: 0.78;
      --inner-frac: 0.48;
      --outer-size: clamp(24px, 2.6vmin, 48px);
      --inner-size: clamp(14px, 2.2vmin, 24px);
      --centre-size: clamp(48px, 7vmin, 84px);
      --tracking: 0.02em;
      --symbol-frac: 1.1; /* Fraction for the symbol ring */
      --symbol-size: clamp(48px, 3vmin, 84px); /* Larger font size for symbols */
      --arrow-frac: 1.4; /* Fraction for the arrow ring */
      --arrow-size: clamp(64px, 4vmin, 128px); /* Font size for arrows */
    }

    html,body{height:100%;margin:0;overflow:hidden}
    body{
      background: var(--bg);
      color: var(--ink);
      font-family: "EK Roumald", ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
      display:grid; place-items:center;
    }

    .dial{ position:relative; width:var(--size); height:var(--size); border-radius:50%; }
    .ring{ position:absolute; inset:0; --offset:-90deg; transform-origin:50% 50%; }

    .label{ position:absolute; top:50%; left:50%; transform-origin:0 0; letter-spacing:var(--tracking); white-space:nowrap; user-select:none; -webkit-user-select:none; }
    .label.outer{ font-size: var(--outer-size); }
    .label.inner{ font-size: var(--inner-size); }
    .label.symbol { font-size: var(--symbol-size); }
    .label.arrow { font-size: var(--arrow-size); }

    .centre{ position:absolute; inset:0; display:grid; place-items:center; font-size:var(--centre-size); line-height:1; }

    .label[data-wobble="even"], .label[data-wobble="odd"]{
      transform:
        rotate(calc(var(--angle) + var(--offset)))
        translateX(var(--r))
        rotate(90deg)
        translate(-50%, -50%);
    }
    .no-js .dial{ display:none; }
    .no-js .fallback{ display:block; text-align:center; padding:2rem; }
    .fallback{ display:none; }

    @keyframes spin { to { transform: rotate(360deg); } }
    @media (prefers-reduced-motion: reduce){ .ring{ animation: none; } }

    .scroll-heading {
      font-family: "EK Roumald", ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
      font-size: 16px;
      font-variant: small-caps; /* Use small caps */
      letter-spacing: var(--tracking);
      text-align: center;
      margin: 0; /* Remove margin to avoid affecting layout */
      position: fixed; /* Use fixed positioning to avoid layout shift */
      top: 0.2rem; /* Adjust top spacing */
      left: 50%; /* Center horizontally */
      transform: translateX(-50%); /* Center horizontally */
      z-index: 10; /* Ensure it stays above other elements */
    }
  </style>
</head>
<body class="no-js">
    <h1 class="scroll-heading" style="font-variant: small-caps;">SCROLL</h1>
  <main class="dial" id="dial">
    <div id="arrows" class="ring" style="--dur: 30s;"></div> <!-- New arrows ring -->
    <div id="symbols" class="ring" style="--dur: 24s;"></div>
    <div id="outer" class="ring" style="--dur: 18s;"></div>
    <div id="inner" class="ring" style="--dur: 36s;"></div>
    <div class="centre">&#x203C;</div>
  </main>

  <div class="fallback">
    <p>Enable JavaScript to view the circular composition.</p>
  </div>

  <script>
    document.body.classList.remove('no-js');

    const outerPairs = [
      'Aa','Bb','Cc','dD','Ee','Ff','Gg','Hh','Ii','Jj','Kk','Ll','Mm','Nn','Oo','Pp','Qq','Rr','Ss','Tt','Uu','Vv','Ww','Xx','Yy','Zz'
    ];
    const numbers = ['0','1','2','3','4','5','6','7','8','9'];
    const symbols = Array.from({ length: 10 }, (_, i) => i === 9 ? String.fromCharCode(0x24EA) : String.fromCharCode(0x2460 + i)); // Unicode circled digits (① to ⑨, ⓪)
    const arrows = Array(8).fill(String.fromCharCode(0x2193)); // Array of 8 downward arrows

    function placeRing(container, labels, radiusPx, className){
      const N = labels.length;
      labels.forEach((text, i) => {
        const angle = (i / N) * 360;
        const span = document.createElement('span');
        span.className = `label ${className}`;
        span.dataset.wobble = i % 2 ? 'odd' : 'even';
        span.style.setProperty('--angle', angle + 'deg');
        span.style.setProperty('--r', radiusPx + 'px');
        span.textContent = text;
        container.appendChild(span);
      });
    }

    const dial = document.getElementById('dial');
    const styles = getComputedStyle(document.documentElement);
    const outerFrac = parseFloat(styles.getPropertyValue('--outer-frac'));
    const innerFrac = parseFloat(styles.getPropertyValue('--inner-frac'));

    function build(scale=1){
      const size = dial.getBoundingClientRect().width;
      const arrowR = (size / 2) * parseFloat(styles.getPropertyValue('--arrow-frac')) * scale * 1.8; // Radius for arrows ring
      const symbolR = (size / 2) * parseFloat(styles.getPropertyValue('--symbol-frac')) * scale * 1.6; // Radius for symbols ring
      const outerR = (size/2) * outerFrac * scale * 1.3; // outer grows faster
      const innerR = (size/2) * innerFrac * scale;

      const arrowsRing = document.getElementById('arrows');
      const symbolsRing = document.getElementById('symbols');
      const outer = document.getElementById('outer');
      const inner = document.getElementById('inner');

      arrowsRing.innerHTML = ''; // Clear previous arrows
      symbolsRing.innerHTML = ''; // Clear previous symbols
      outer.innerHTML = '';
      inner.innerHTML = '';

      placeRing(arrowsRing, arrows, arrowR, 'arrow'); // Place arrows
      placeRing(symbolsRing, symbols, symbolR, 'symbol'); // Place symbols
      placeRing(outer, outerPairs, outerR, 'outer');
      placeRing(inner, numbers, innerR, 'inner');
    }

    function applyTransformations(zoom, rotation) {
      document.getElementById('arrows').style.transform = `rotate(${rotation * 4}deg) scale(${zoom * 1.4})`; // Arrows rotate and scale
      document.getElementById('symbols').style.transform = `rotate(${rotation * 3}deg) scale(${zoom * 1.2})`; // Symbols rotate and scale
      document.getElementById('outer').style.transform = `rotate(${rotation * 2}deg) scale(${zoom})`;
      document.getElementById('inner').style.transform = `rotate(${rotation}deg) scale(${zoom * 0.8})`;
      document.querySelector('.centre').style.transform = `scale(${zoom * 1.6})`; // Scale the center exclamation mark
    }

    let zoom = 1;
    let rotation = 0; // Track rotation

    build(zoom);
    applyTransformations(zoom, rotation); // Apply initial transformations

    window.addEventListener('wheel', e => {
      e.preventDefault();

      zoom += e.deltaY * -0.001; // scroll down increases zoom
      zoom = Math.max(0.5, Math.min(zoom, 3)); // Prevent scaling smaller than minimum size

      rotation += e.deltaY * 0.1; // scroll down rotates clockwise
      applyTransformations(zoom, rotation); // Apply transformations during scroll
    }, { passive: false });

    window.addEventListener('resize', () => {
      build(zoom);
      applyTransformations(zoom, rotation); // Reapply transformations after resize
    });
  </script>
</body>
</html>
